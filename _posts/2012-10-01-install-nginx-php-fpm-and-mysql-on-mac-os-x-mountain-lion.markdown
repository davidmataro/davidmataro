---
layout: post
status: publish
published: true
title: Install nginx, php-fpm and MySQL on Mac OS X Mountain Lion
author:
  display_name: davidmataro
  login: admin
  email: jo@davidmataro.com
  url: http://www.davidmataro.com
author_login: admin
author_email: jo@davidmataro.com
author_url: http://www.davidmataro.com
wordpress_id: 483
wordpress_url: http://www.davidmataro.com/?p=483
date: !binary |-
  MjAxMi0xMC0wMSAxMTowNDoxNCArMDAwMA==
date_gmt: !binary |-
  MjAxMi0xMC0wMSAwOTowNDoxNCArMDAwMA==
tags:
- mac
- mysql
- nginx
- macosx
- php-fpm
comments:
- id: 4083
  author: davidmataro
  author_email: jo@davidmataro.com
  author_url: http://www.davidmataro.com
  date: !binary |-
    MjAxMi0xMS0wOSAyMjowNDowNCArMDAwMA==
  date_gmt: !binary |-
    MjAxMi0xMS0wOSAyMDowNDowNCArMDAwMA==
  content: ! "If you need SSL, you need install nginx with next command:\r\n\r\nsudo
    port install nginx +ssl"
- id: 30143
  author: SEO Sydney price twitter
  author_email: domingalienhop@yahoo.com
  author_url: http://hk.potspots.com/?document_srl=4300277
  date: !binary |-
    MjAxNC0wNi0xMyAyMjoxNDo0OCArMDAwMA==
  date_gmt: !binary |-
    MjAxNC0wNi0xMyAyMDoxNDo0OCArMDAwMA==
  content: ! "No mɑtter if some one searches for his necessary thing, tɦus he/she
    needs to be available that in detail, thus that thing \r\nіss maintained over
    here."
- id: 34314
  author: louis vuitton pas cher
  author_email: rheavine@aol.com
  author_url: http://fousale.com/
  date: !binary |-
    MjAxNC0wNi0yNiAyMDo1MzoxNiArMDAwMA==
  date_gmt: !binary |-
    MjAxNC0wNi0yNiAxODo1MzoxNiArMDAwMA==
  content: ! "It is appropriate time to make a few plans for the future and \r\nit's
    time to be happy. I've learn this post and if I could I \r\nwant to suggest you
    few attention-grabbing things or advice.\r\nPerhaps you could write subsequent
    articles \r\nregarding this article. I want to learn even more issues about it!"
- id: 37585
  author: http://downloadcydia11.org
  author_email: jamelthomas@gmail.com
  author_url: http://downloadcydia11.org/
  date: !binary |-
    MjAxNC0wNy0xMCAxODo1MDoyMiArMDAwMA==
  date_gmt: !binary |-
    MjAxNC0wNy0xMCAxNjo1MDoyMiArMDAwMA==
  content: ! "10 Cool Cydia AppsHere's another round-up of Cydia apps that you have
    chosen. Here's a list of 10 most \r\nuseful Cydia sources as it allows you to
    add functionality to your iPhone which \r\nwas not previously possible. Cydia
    is flexible and comes with a large \r\nnumber of people even went out of the way,
    and resorted to Cydia, Find Out How to Use Cydia for \r\nJailbroken iPhone or
    iPod touch."
- id: 38914
  author: Ergo Baby Carrier UK
  author_email: ramon_perkin@freenet.de
  author_url: http://britishandcolombianchamber.com/files/Ergo_Baby_Carrier_UK.html
  date: !binary |-
    MjAxNC0wNy0xNyAxMTo0ODowOSArMDAwMA==
  date_gmt: !binary |-
    MjAxNC0wNy0xNyAwOTo0ODowOSArMDAwMA==
  content: ! "I've been surfing online more than 4 hours today, yet I never found
    any interesting article like \r\nyours. It's pretty worth enough for me. In my
    view, \r\nif all webmasters and bloggers made good content as you did, the web
    will be \r\nmuch more useful than ever before."
- id: 40058
  author: Canada Goose Chilliwack Bomber
  author_email: sharyncoulter@gmail.com
  author_url: http://www.richby20.com/canada-goose-homme-chilliwack-bomber-c-3_17.html
  date: !binary |-
    MjAxNC0wNy0yMSAyMjozOTo1MiArMDAwMA==
  date_gmt: !binary |-
    MjAxNC0wNy0yMSAyMDozOTo1MiArMDAwMA==
  content: ! "I like what you guys tend to be up too. This kind of clever work and
    reporting!\r\nKeep up the awesome works guys I've incorporated you guys to my
    \r\nblogroll."
- id: 43738
  author: back injury bodybuilding
  author_email: caridadferrell@arcor.de
  author_url: http://thinkpositive.we.bs/article/article.php?id=8665
  date: !binary |-
    MjAxNC0wNy0yOSAwNToxMjoxOCArMDAwMA==
  date_gmt: !binary |-
    MjAxNC0wNy0yOSAwMzoxMjoxOCArMDAwMA==
  content: ! "І simply could not go away yօur sitе prior to suggesting that I really
    enjoyued \r\nthe usual infо an individual providе for your \r\nvisitors? Is gonna
    be again oftten in ordеr tto check ouut new posts"
- id: 45458
  author: cubby house queanbeyan
  author_email: janette_boisvert@aol.com
  author_url: http://janesbook.com/blog/7274/whatever-happened-to-annette-funicello-aevans/
  date: !binary |-
    MjAxNC0wOC0wMSAwMzo1Mjo1NSArMDAwMA==
  date_gmt: !binary |-
    MjAxNC0wOC0wMSAwMTo1Mjo1NSArMDAwMA==
  content: ! "Whɑt's up it's me, I am also visiting this weЬsite οn a \r\nregulaг
    basis, this site is genuinely nice and the users are in fact sharing nice thoughts."
- id: 56958
  author: kids chore charts with pictures
  author_email: tammara_combs@freenet.de
  author_url: http://academianini.es/wiki/index.php?title=Potty_Training_Stickers_For_Boys
  date: !binary |-
    MjAxNC0wOS0wMyAxOTowODozMyArMDAwMA==
  date_gmt: !binary |-
    MjAxNC0wOS0wMyAxNzowODozMyArMDAwMA==
  content: ! "Woա, marvelouѕ blog laуout! How long have you been blogging for?\r\nyou
    make blogging lkok easy. Tɦe overall looқ of youur site is fantastic, aѕ \r\nwell
    as the content!"
- id: 63591
  author: canada goose camp down hooded brun
  author_email: claudiomcclung@freenet.de
  author_url: http://www.saintmihiel.fr/IMG/gros-canada-goose-camp-down-hooded-brun.html
  date: !binary |-
    MjAxNC0wOS0yMSAwNjoxMTozOSArMDAwMA==
  date_gmt: !binary |-
    MjAxNC0wOS0yMSAwNDoxMTozOSArMDAwMA==
  content: ! "Hi! I've been following your web site for a while now and finally got
    the bravery to go \r\nahead and give you a shout out from Lubbock Texas!\r\nJust
    wanted to say keep up the excellent job!"
- id: 63751
  author: canada goose constable parka femme bluetopaz
  author_email: claritatardent@gmail.com
  author_url: http://www.empreinte-production.com/IMG/boutique-en-ligne-canada-goose-constable-parka-femme-bluetopaz.html
  date: !binary |-
    MjAxNC0wOS0yMSAxMjo0MTowNCArMDAwMA==
  date_gmt: !binary |-
    MjAxNC0wOS0yMSAxMDo0MTowNCArMDAwMA==
  content: ! "Great work! This is the type of information that are meant to be \r\nshared
    across the web. Disgrace on the search engines for not positioning this submit
    \r\nupper! Come on over and discuss with my site . Thank you =)"
---
<p>Before you start to install anyone of stack components, you need install macports. To install macports, please go to <a title="macports" href="http://www.macports.org/" target="_blank">www.macports.org</a>.</p>
<p>Once you have installed macports, you can start to install the stack.</p>
<p>Remember install xcode command line tools. Open Xcode and got to Preference, select Download and install command line tools.</p>
<p>To install MySQL, download mysql-5.5.28-ox10.6-x86.dmg and install:</p>
<p>mysql-5.5.28-ox10.6-x86.pkg<br />
MySQLStartupItem.pkg</p>
<p>To disable automatic startup configure file /etc/hostconfig</p>
<p>MYSQLCOM=-NO-</p>
<p>Install Php-fpm<br />
<code lang="bash"><br />
sudo port install php54-fpm<br />
sudo cp /opt/local/etc/php54/php-fpm.conf.default /opt/local/etc/php54/php-fpm.conf<br />
sudo port install php54-mysql php54-mbstring php54-APC<br />
sudo port install php54-mcrypt<br />
sudo port install php54-gd<br />
sudo port install php54-curl<br />
sudo port install php54-iconv<br />
</code></p>
<p>Install Nginx<br />
<code lang="bash"><br />
sudo port install nginx<br />
sudo cp -p /opt/local/etc/nginx/fastcgi.conf.example /opt/local/etc/nginx/fastcgi.conf<br />
sudo cp /opt/local/etc/nginx/fastcgi_params.example /opt/local/etc/nginx/fastcgi_params<br />
sudo cp /opt/local/etc/nginx/mime.types.example /opt/local/etc/nginx/mime.types<br />
sudo cp /opt/local/etc/nginx/nginx.conf.example /opt/local/etc/nginx/nginx.conf<br />
sudo mkdir /opt/local/etc/nginx/conf.d<br />
</code></p>
<p>Configure www pool in php-fpm.conf<br />
<code lang="bash"><br />
[www]<br />
pm = dynamic<br />
pm.max_children = 1<br />
pm.start_servers = 1<br />
pm.min_spare_servers = 1<br />
pm.max_spare_servers = 1<br />
pm.max_requests = 500<br />
</code></p>
<p>Nginx.conf<br />
<code lang="bash"><br />
#user nobody;<br />
worker_processes 1;</p>
<p>#error_log logs/error.log;<br />
#error_log logs/error.log notice;<br />
#error_log logs/error.log info;</p>
<p>#pid logs/nginx.pid;</p>
<p>events {<br />
worker_connections 1024;<br />
}</p>
<p>http {<br />
include mime.types;<br />
default_type application/octet-stream;</p>
<p>#log_format main '$remote_addr - $remote_user [$time_local] "$request" '<br />
# '$status $body_bytes_sent "$http_referer" '<br />
# '"$http_user_agent" "$http_x_forwarded_for"';</p>
<p>#access_log logs/access.log main;</p>
<p>sendfile on;<br />
#tcp_nopush on;</p>
<p>#keepalive_timeout 0;<br />
keepalive_timeout 65;</p>
<p>#gzip on;</p>
<p>server {<br />
listen 80;<br />
server_name localhost;</p>
<p>#charset koi8-r;</p>
<p>#access_log logs/host.access.log main;</p>
<p>location / {<br />
root share/nginx/html;<br />
index index.html index.htm;<br />
}</p>
<p>#error_page 404 /404.html;</p>
<p># redirect server error pages to the static page /50x.html<br />
#<br />
error_page 500 502 503 504 /50x.html;<br />
location = /50x.html {<br />
root share/nginx/html;<br />
}<br />
}</p>
<p># load config files from /opt/local/etc/nginx/conf.d<br />
include /opt/local/etc/nginx/conf.d/*.conf;<br />
}<br />
</code></p>
<p>Configure start and stop command in your .bash_profile<br />
<code lang="bash"><br />
# nginx<br />
alias nginx_start='sudo launchctl load -w /Library/LaunchDaemons/org.macports.nginx.plist'<br />
alias nginx_stop='sudo launchctl unload -w /Library/LaunchDaemons/org.macports.nginx.plist'<br />
alias nginx_restart='nginx_stop; nginx_start;'</code></p>
<p># php-fpm<br />
alias fpm_start='sudo launchctl load -w /Library/LaunchDaemons/org.macports.php54-fpm.plist'<br />
alias fpm_stop='sudo launchctl unload -w /Library/LaunchDaemons/org.macports.php54-fpm.plist'<br />
alias fpm_restart='fpm_stop; fpm_start'</p>
<p># mysql<br />
alias mysql=/usr/local/mysql/bin/mysql<br />
alias mysqladmin=/usr/local/mysql/bin/mysqladmin<br />
alias sql_start="sudo /Library/StartupItems/MySQLCOM/MySQLCOM restart"<br />
alias sql_stop="sudo /Library/StartupItems/MySQLCOM/MySQLCOM stop"<br />
alias sql_restart="sudo /Library/StartupItems/MySQLCOM/MySQLCOM restart"</p>
<p>To stop mysql, you need kill the process.</p>
<p>References:</p>
<p><a href="https://gist.github.com/3188956" target="_blank">https://gist.github.com/3188956</a></p>
